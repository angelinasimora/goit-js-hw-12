{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/img/error.png","../src/main.js"],"sourcesContent":["\nimport axios from 'axios';\n\nexport const searchImage = async (search, page, perPage) => {\n  const url = `https://pixabay.com/api/`;\n\n  const response = await axios.get(url, {\n    params: {\n      key: '47412698-017a3cc161c8c283fa818e1a7',\n      q: search,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: perPage,\n      page: page,\n    },\n  });\n\n  return response.data;\n};","export const renderImages = images => {\n  return images\n    .map(\n      image => `\n    <li class='gallery-item'>\n      <a href=${image.largeImageURL}>\n        <img alt=${image.tags} src=${image.webformatURL} class='gallery-image'/>\n      </a>\n      <ul class='list-info'>\n        <li class='item-info'>\n          <p class='title-info'>Likes</p>\n          <p class='count-info'>${image.likes}</p>\n        </li>\n        <li class='item-info'>\n          <p class='title-info'>Views</p>\n          <p class='count-info'>${image.views}</p>\n        </li>\n        <li class='item-info'>\n          <p class='title-info'>Comments</p>\n          <p class='count-info'>${image.comments}</p>\n        </li>\n        <li class='item-info'>\n          <p class='title-info'>Downloads</p>\n          <p class='count-info'>${image.downloads}</p>\n        </li>\n      </ul>\n    </li>\n    `\n    )\n    .join('');\n};","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEpSURBVHgBrZXtEcIgDIZTzp5/3URHcSPpJLpBXcVd+FPwiqQt1y+SUNv3DuUkvA+0SQQg5Jx7WOt8zsBYyudEmXsPuijg3bbtB1ipa/jQYQ+UZVmBpHjyprEvyBTGSjf52zwbssdchBxhTkI4c2vtTTJMxcwgw6RObZReXDycMSYBcTWuQX/6RqcMQpCmIOPNHbG30SKAgkjmU8AJBJ3PpQ5GOO2KCYVFGEaFa9J+EbCEDIAsc5SCTCkFPjWXlHWD2Jvw5MNP2b1HBEzN42OZvhMRwmURly1cCvfrszSlC41PxR6SKjQs3g4Qg6z9PpdBxsitIhWDXrPDcZCtWplHHQEhzY+AiOZ7IJz5qg5iWygK/wjfFwD+T18pdfXe37e0j07jTeTBPZYfWztI8097RKsAAAAASUVORK5CYII=\"","import iziToast from 'izitoast';\n\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport { searchImage } from './js/pixabay-api';\nimport { renderImages } from './js/render-functions';\nimport errorIcon from './img/error.png';\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('ul.gallery');\nconst loader = document.querySelector('.loader');\nconst buttonLoadMore = document.querySelector('.button-search-more');\nconst section = document.querySelector('section');\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\n\niziToast.settings({\n  timeout: 4000,\n  position: 'topRight',\n});\n\niziToast.show({\n  title: 'Hey⭐️',\n  message: 'What are you looking?',\n   backgroundColor: '#ffffff', \n  messageColor: '#000', \n  titleColor: '#000', \n  iconColor: '#ffffff',\n  timeout: 7000,\n});\n\n\nlet page = 1;\nlet perPage = 15;\nlet searchText = '';\nlet totalPages = 0;\n\nconst functionSearch = (first) => {\n  if (first) {\n    page = 1;\n  }\n\n  searchImage(searchText, page, perPage)\n    .then(({ hits, totalHits }) => {\n      totalPages = Math.ceil(totalHits / perPage);\n\n      if (first) {\n        gallery.innerHTML = '';\n        buttonLoadMore.style.visibility = 'hidden';\n      }\n\n      const images = renderImages(hits);\n      if (images) {\n        loader.style.display = 'none';\n      }\n\n      if (hits.length === 0) {\n        iziToast.error({\n          iconUrl: errorIcon,\n          iconColor: '#fff',\n          imageWidth: 24,\n          messageColor: '#fff',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n        loader.style.display = 'none';\n        gallery.innerHTML = '';\n        return; // Вихід, якщо немає результатів\n      }\n\n      first\n        ? (gallery.innerHTML = images)\n        : gallery.insertAdjacentHTML('beforeend', images);\n\n      // Інкрементація тільки якщо завантажено результати\n      page += 1;\n\n      if (page > totalPages) {\n        loader.style.display = 'none';\n        buttonLoadMore.style.visibility = 'hidden';\n\n        if (totalPages > 0) {\n          iziToast.info({\n            iconColor: '#fff',\n            imageWidth: 24,\n            messageColor: '#fff',\n            message: \"We're sorry, but you've reached the end of search results.\",\n          });\n        }\n\n        return; // Вихід, якщо досягнуто кінця результатів\n      }\n\n      buttonLoadMore.style.visibility = 'visible';\n      buttonLoadMore.style.display = 'block';\n\n      const imageCard = document.querySelector('.gallery-item');\n      if (imageCard) {\n        const { y } = imageCard.getBoundingClientRect();\n        window.scrollBy({\n          top: -y * 2,\n          behavior: 'smooth',\n        });\n      }\n\n      lightbox.refresh();\n      form.reset();\n    })\n    .catch((error) => {\n      loader.style.display = 'none';\n      gallery.innerHTML = '';\n      iziToast.error({\n        iconUrl: errorIcon,\n        iconColor: '#fff',\n        imageWidth: 24,\n        messageColor: '#fff',\n        message: error.message,\n      });\n    });\n};\n\nconst createGalary = (e) => {\n  e.preventDefault();\n  gallery.innerHTML = '';\n  loader.style.display = 'block';\n  searchText = e.target.elements.search.value.trim();\n\n  if (searchText === '') {\n    iziToast.error({\n      iconUrl: errorIcon,\n      iconColor: '#fff',\n      imageWidth: 24,\n      messageColor: '#fff',\n      message: 'Please write a query for search',\n    });\n    gallery.innerHTML = '';\n    loader.style.display = 'none';\n    return;\n  }\n\n  functionSearch(true);\n  e.target.elements.search.value = '';\n  \n\n};\n\nconst addItemInGallery = () => {\n  loader.style.display = 'block'; // Показуємо лоадер перед запитом\n  buttonLoadMore.style.display = 'none'; // Ховаємо кнопку, щоб уникнути повторного кліку\n  functionSearch(false); // Викликаємо функцію пошуку\n};\n\n\nform.addEventListener('submit', createGalary);\nbuttonLoadMore.addEventListener('click', addItemInGallery); \n"],"names":["searchImage","search","page","perPage","axios","renderImages","images","image","errorIcon","form","gallery","loader","buttonLoadMore","lightbox","SimpleLightbox","iziToast","searchText","totalPages","functionSearch","first","hits","totalHits","imageCard","y","error","createGalary","e","addItemInGallery"],"mappings":"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"}